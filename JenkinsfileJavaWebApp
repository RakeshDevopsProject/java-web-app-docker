pipeline{
    tools {
        maven 'maven3.9.0'
    }
    environment{
        Version = "${env.BUILD_NUMBER}"
    }
    agent any
    stages{
        stage("Build with Maven"){
            steps{
                sh "mvn clean package"
            }
        }
        stage("Build Docker image"){
            steps{
                script{
                      sh "docker build -t gundurakesh/javawebapp:${Version} ."
                } 
                
            }
        }
        
    }//stages closing   
}//pipeline closing
